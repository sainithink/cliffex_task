const express = require('express')
const app = express();
var Distance = require('geo-distance');

app.get('/', (req, res) => {
  res.send('Hello World!')
});


app.get('/json',async function(req,res){




    const a=[{lt:48.231496,lg:16.385285,a:162.067498,ts:1590685171.979584,mt:7},{lt:48.231669,lg:16.385060,a:161.553169,ts:1590685185.276230,mt:7},{lt:48.231909,lg:16.385094,a:161.785742,ts:1590685192.001398,mt:8},{lt:48.232117,lg:16.384932,a:163.775294,ts:1590685201.000671,mt:8},{lt:48.232311,lg:16.384740,a:160.037246,ts:1590685213.000093,mt:8},{lt:48.232482,lg:16.384488,a:161.193578,ts:1590685222.999786,mt:8},{lt:48.232627,lg:16.384204,a:163.152321,ts:1590685234.999517,mt:8},{lt:48.232818,lg:16.384008,a:163.141645,ts:1590685244.999337,mt:8},{lt:48.233032,lg:16.383830,a:163.179633,ts:1590685254.999169,mt:8},{lt:48.233198,lg:16.384094,a:162.985780,ts:1590685268.998957,mt:8},{lt:48.233391,lg:16.384283,a:164.281047,ts:1590685277.998824,mt:8},{lt:48.233558,lg:16.384548,a:164.134953,ts:1590685285.998709,mt:8},{lt:48.233737,lg:16.384824,a:165.350871,ts:1590685294.998579,mt:8},{lt:48.233917,lg:16.385072,a:162.954500,ts:1590685305.000092,mt:8},{lt:48.234105,lg:16.385314,a:161.129046,ts:1590685313.000122,mt:8},{lt:48.234311,lg:16.385508,a:162.994905,ts:1590685320.000051,mt:8},{lt:48.234511,lg:16.385726,a:162.479843,ts:1590685327.999912,mt:8},{lt:48.234668,lg:16.385967,a:163.259043,ts:1590685335.999779,mt:8},{lt:48.234821,lg:16.386229,a:161.997559,ts:1590685344.999640,mt:8},{lt:48.234981,lg:16.386478,a:163.342266,ts:1590685353.999510,mt:8},{lt:48.235089,lg:16.386791,a:164.724354,ts:1590685362.999379,mt:8},{lt:48.235233,lg:16.387083,a:162.890369,ts:1590685373.999218,mt:8},{lt:48.235372,lg:16.387380,a:163.386577,ts:1590685382.999093,mt:8},{lt:48.235571,lg:16.387614,a:163.724450,ts:1590685393.998934,mt:8},{lt:48.235722,lg:16.387871,a:163.650267,ts:1590685401.998820,mt:8},{lt:48.235821,lg:16.388179,a:166.526796,ts:1590685410.998693,mt:8},{lt:48.235983,lg:16.388428,a:164.682096,ts:1590685419.998569,mt:8},{lt:48.236148,lg:16.388681,a:162.636553,ts:1590685429.000249,mt:8},{lt:48.236317,lg:16.388908,a:164.632691,ts:1590685437.000257,mt:8},{lt:48.236424,lg:16.389207,a:163.876517,ts:1590685456.999994,mt:7},{lt:48.236472,lg:16.389555,a:162.287390,ts:1590685478.999645,mt:8},{lt:48.236614,lg:16.389844,a:163.380446,ts:1590685489.999480,mt:8},{lt:48.236753,lg:16.390113,a:163.486147,ts:1590685498.999348,mt:8},{lt:48.236895,lg:16.390396,a:163.569059,ts:1590685507.999211,mt:8},{lt:48.237060,lg:16.390667,a:161.406142,ts:1590685517.999062,mt:8},{lt:48.236880,lg:16.390869,a:162.710701,ts:1590685529.998885,mt:8},{lt:48.236677,lg:16.391082,a:165.972020,ts:1590685539.998737,mt:8},{lt:48.236746,lg:16.391412,a:164.541632,ts:1590685550.000343,mt:8},{lt:48.236833,lg:16.391727,a:164.760057,ts:1590685559.000316,mt:8},{lt:48.237059,lg:16.391751,a:166.256996,ts:1590685572.000208,mt:8},{lt:48.237258,lg:16.391587,a:167.034683,ts:1590685581.000037,mt:8},{lt:48.237451,lg:16.391339,a:165.953063,ts:1590685591.999852,mt:8},{lt:48.237635,lg:16.391122,a:165.582640,ts:1590685600.999701,mt:8},{lt:48.237820,lg:16.390914,a:164.385288,ts:1590685610.999542,mt:8},{lt:48.237998,lg:16.390702,a:164.195701,ts:1590685619.999406,mt:8},{lt:48.238197,lg:16.390530,a:165.171937,ts:1590685628.999260,mt:8},{lt:48.238377,lg:16.390312,a:163.910406,ts:1590685637.999121,mt:8},{lt:48.238580,lg:16.390101,a:165.047874,ts:1590685646.998981,mt:8},{lt:48.238757,lg:16.389877,a:162.695482,ts:1590685655.998848,mt:8},{lt:48.238971,lg:16.389679,a:164.545971,ts:1590685664.998708,mt:8},{lt:48.239156,lg:16.389487,a:163.631425,ts:1590685673.998567,mt:8},{lt:48.239365,lg:16.389281,a:164.325147,ts:1590685683.000293,mt:8},{lt:48.239546,lg:16.389073,a:163.701821,ts:1590685692.000270,mt:8},{lt:48.239739,lg:16.388864,a:164.838945,ts:1590685701.000149,mt:8},{lt:48.239940,lg:16.388648,a:164.574999,ts:1590685710.999979,mt:8},{lt:48.240128,lg:16.388447,a:162.788932,ts:1590685719.999831,mt:8},{lt:48.240317,lg:16.388245,a:165.203833,ts:1590685728.999691,mt:8},{lt:48.240508,lg:16.388021,a:164.051952,ts:1590685737.999543,mt:8},{lt:48.240724,lg:16.387834,a:165.377978,ts:1590685746.999403,mt:8},{lt:48.240911,lg:16.387635,a:165.627007,ts:1590685755.999260,mt:8},{lt:48.241085,lg:16.387412,a:165.198520,ts:1590685763.999132,mt:8},{lt:48.241270,lg:16.387200,a:165.110216,ts:1590685772.998992,mt:8},{lt:48.241463,lg:16.387000,a:164.648233,ts:1590685780.998862,mt:8},{lt:48.241674,lg:16.386819,a:164.217450,ts:1590685789.998720,mt:8},{lt:48.241905,lg:16.386678,a:164.112081,ts:1590685799.998561,mt:8},{lt:48.242118,lg:16.386502,a:164.098961,ts:1590685809.000288,mt:8},{lt:48.242254,lg:16.386195,a:160.006354,ts:1590685823.000196,mt:8},{lt:48.242456,lg:16.386003,a:162.377508,ts:1590685831.000045,mt:8},{lt:48.242675,lg:16.385855,a:163.207092,ts:1590685838.999906,mt:8},{lt:48.242860,lg:16.385632,a:164.268436,ts:1590685847.999754,mt:8},{lt:48.243068,lg:16.385482,a:165.025552,ts:1590685856.999605,mt:1},{lt:48.243280,lg:16.385281,a:164.201178,ts:1590685866.999442,mt:1},{lt:48.243481,lg:16.385104,a:163.899880,ts:1590685891.999040,mt:1},{lt:48.243677,lg:16.384933,a:164.332606,ts:1590685902.998862,mt:1},{lt:48.243916,lg:16.384908,a:163.418018,ts:1590685916.998641,mt:8},{lt:48.244104,lg:16.384701,a:163.681454,ts:1590685926.998477,mt:8},{lt:48.244338,lg:16.384650,a:163.789532,ts:1590685937.000226,mt:8},{lt:48.244536,lg:16.384474,a:163.787034,ts:1590685946.000215,mt:1},{lt:48.244730,lg:16.384304,a:162.883532,ts:1590685955.000055,mt:1},{lt:48.244950,lg:16.384085,a:161.926771,ts:1590685964.999889,mt:8},{lt:48.245137,lg:16.383873,a:161.347060,ts:1590685974.999723,mt:1},{lt:48.245327,lg:16.383692,a:162.563480,ts:1590685983.999571,mt:8},{lt:48.245534,lg:16.383481,a:162.929720,ts:1590685993.999408,mt:1},{lt:48.245725,lg:16.383294,a:162.817308,ts:1590686002.999260,mt:8},{lt:48.245931,lg:16.383092,a:161.844439,ts:1590686012.999098,mt:8},{lt:48.246113,lg:16.382892,a:162.318435,ts:1590686022.998936,mt:8},{lt:48.246320,lg:16.382706,a:159.608418,ts:1590686033.998756,mt:8},{lt:48.246496,lg:16.382482,a:160.515897,ts:1590686043.998594,mt:1},{lt:48.246697,lg:16.382321,a:162.145896,ts:1590686051.998464,mt:8},{lt:48.246891,lg:16.382113,a:162.260627,ts:1590686063.000208,mt:8},{lt:48.246700,lg:16.382298,a:160.752916,ts:1590686105.999586,mt:8},{lt:48.246480,lg:16.382430,a:161.645302,ts:1590686115.999419,mt:8},{lt:48.246287,lg:16.382615,a:162.493255,ts:1590686124.999271,mt:8},{lt:48.246098,lg:16.382813,a:161.263583,ts:1590686132.999134,mt:8},{lt:48.245916,lg:16.383030,a:161.281421,ts:1590686141.998987,mt:8},{lt:48.245713,lg:16.383210,a:161.415650,ts:1590686150.998837,mt:8},{lt:48.245508,lg:16.383425,a:163.928720,ts:1590686160.998673,mt:8},{lt:48.245315,lg:16.383637,a:163.482800,ts:1590686170.998508,mt:8},{lt:48.245121,lg:16.383850,a:164.249922,ts:1590686181.000116,mt:8},{lt:48.244911,lg:16.384007,a:162.568088,ts:1590686190.000143,mt:8},{lt:48.244721,lg:16.384199,a:162.855877,ts:1590686199.000111,mt:8},{lt:48.244542,lg:16.384422,a:163.396924,ts:1590686207.999969,mt:8},{lt:48.244328,lg:16.384601,a:162.633679,ts:1590686217.999804,mt:8},{lt:48.244138,lg:16.384795,a:162.651451,ts:1590686226.999652,mt:8},{lt:48.243945,lg:16.385036,a:162.161150,ts:1590686235.999506,mt:8},{lt:48.243741,lg:16.385222,a:161.122310,ts:1590686245.999340,mt:8},{lt:48.243552,lg:16.385462,a:160.271111,ts:1590686254.999192,mt:8},{lt:48.243353,lg:16.385621,a:161.520757,ts:1590686263.999042,mt:8},{lt:48.243149,lg:16.385778,a:158.313751,ts:1590686272.998895,mt:8},{lt:48.242971,lg:16.385997,a:162.589771,ts:1590686306.000106,mt:7},{lt:48.242769,lg:16.386200,a:161.116372,ts:1590686318.000107,mt:8},{lt:48.242603,lg:16.386440,a:161.400526,ts:1590686331.999969,mt:8},{lt:48.242394,lg:16.386638,a:161.046680,ts:1590686341.999816,mt:8},{lt:48.242165,lg:16.386819,a:161.879077,ts:1590686350.999674,mt:8},{lt:48.241975,lg:16.387053,a:162.219526,ts:1590686359.999529,mt:8},{lt:48.241789,lg:16.387266,a:160.859554,ts:1590686368.999383,mt:8},{lt:48.241576,lg:16.387478,a:164.456380,ts:1590686377.999237,mt:8},{lt:48.241367,lg:16.387671,a:162.129488,ts:1590686386.999088,mt:8},{lt:48.241185,lg:16.387890,a:163.631532,ts:1590686396.998923,mt:8},{lt:48.241003,lg:16.388100,a:161.625113,ts:1590686404.998791,mt:8},{lt:48.240797,lg:16.388284,a:162.507603,ts:1590686413.998642,mt:8},{lt:48.240592,lg:16.388453,a:162.821791,ts:1590686422.998495,mt:8},{lt:48.240403,lg:16.388640,a:161.229981,ts:1590686432.000040,mt:8},{lt:48.240222,lg:16.388906,a:161.563842,ts:1590686441.000062,mt:8},{lt:48.240021,lg:16.389069,a:162.284979,ts:1590686449.000062,mt:8},{lt:48.239836,lg:16.389271,a:163.679829,ts:1590686461.999854,mt:1},{lt:48.239621,lg:16.389401,a:163.542632,ts:1590686478.999561,mt:8},{lt:48.239417,lg:16.389555,a:164.490739,ts:1590686494.999290,mt:7},{lt:48.239186,lg:16.389467,a:164.377090,ts:1590686510.999027,mt:8},{lt:48.238988,lg:16.389656,a:165.392897,ts:1590686520.998864,mt:8},{lt:48.238799,lg:16.389851,a:164.269629,ts:1590686529.998715,mt:8},{lt:48.238617,lg:16.390066,a:163.398069,ts:1590686538.998565,mt:8},{lt:48.238430,lg:16.390276,a:165.014302,ts:1590686546.998435,mt:1},{lt:48.238242,lg:16.390473,a:165.182003,ts:1590686556.998274,mt:8},{lt:48.238053,lg:16.390694,a:164.817946,ts:1590686567.000020,mt:8},{lt:48.237862,lg:16.390878,a:165.946362,ts:1590686577.000032,mt:8},{lt:48.237660,lg:16.391094,a:163.431944,ts:1590686586.999872,mt:8},{lt:48.237475,lg:16.391299,a:165.105381,ts:1590686595.999724,mt:8},{lt:48.237275,lg:16.391489,a:161.354304,ts:1590686606.999677,mt:8},{lt:48.237073,lg:16.391682,a:162.595074,ts:1590686615.999401,mt:8},{lt:48.236837,lg:16.391639,a:165.658895,ts:1590686629.999169,mt:8},{lt:48.236727,lg:16.391335,a:163.963694,ts:1590686639.999007,mt:8},{lt:48.236819,lg:16.390992,a:162.471119,ts:1590686650.998828,mt:8},{lt:48.236965,lg:16.390731,a:163.673995,ts:1590686693.000071,mt:7},{lt:48.236878,lg:16.390410,a:163.087276,ts:1590686706.000007,mt:8},{lt:48.236733,lg:16.390128,a:164.810024,ts:1590686714.999856,mt:8},{lt:48.236594,lg:16.389845,a:163.733422,ts:1590686723.999705,mt:8},{lt:48.236474,lg:16.389551,a:163.958036,ts:1590686731.999573,mt:8},{lt:48.236334,lg:16.389271,a:162.739542,ts:1590686744.999361,mt:8},{lt:48.236204,lg:16.388968,a:163.569546,ts:1590686754.999196,mt:8},{lt:48.236066,lg:16.388634,a:162.708317,ts:1590686763.999054,mt:8},{lt:48.235970,lg:16.388328,a:162.672474,ts:1590686771.998923,mt:8},{lt:48.235804,lg:16.388087,a:162.787153,ts:1590686780.998773,mt:8},{lt:48.235620,lg:16.387861,a:163.073380,ts:1590686788.998642,mt:8},{lt:48.235503,lg:16.387572,a:162.426214,ts:1590686796.998513,mt:8},{lt:48.235370,lg:16.387299,a:164.202923,ts:1590686804.998379,mt:8},{lt:48.235207,lg:16.387041,a:156.727257,ts:1590686817.000064,mt:8},{lt:48.235048,lg:16.386744,a:161.085719,ts:1590686827.000063,mt:8},{lt:48.234911,lg:16.386475,a:163.455453,ts:1590686854.999586,mt:7},{lt:48.234801,lg:16.386166,a:162.317111,ts:1590686871.999305,mt:7},{lt:48.234652,lg:16.385903,a:161.179282,ts:1590686882.999124,mt:8},{lt:48.234503,lg:16.385609,a:162.049879,ts:1590686891.998970,mt:8},{lt:48.234323,lg:16.385347,a:160.532000,ts:1590686899.998840,mt:8},{lt:48.234213,lg:16.385036,a:157.449631,ts:1590686908.998694,mt:8},{lt:48.234148,lg:16.384710,a:159.553077,ts:1590686916.998564,mt:8},{lt:48.233990,lg:16.384460,a:164.720547,ts:1590686924.998433,mt:8},{lt:48.233833,lg:16.384172,a:164.063437,ts:1590686933.998285,mt:8},{lt:48.233691,lg:16.383882,a:164.948127,ts:1590686943.000021,mt:8},{lt:48.233563,lg:16.383591,a:164.032736,ts:1590686952.000050,mt:8},{lt:48.233346,lg:16.383691,a:163.351801,ts:1590686961.999953,mt:8},{lt:48.233234,lg:16.383984,a:162.546561,ts:1590686973.999792,mt:7},{lt:48.233039,lg:16.384186,a:161.816157,ts:1590686987.999587,mt:8},{lt:48.232796,lg:16.384251,a:160.435149,ts:1590686996.999442,mt:8},{lt:48.232596,lg:16.384427,a:162.848444,ts:1590687005.999302,mt:8},{lt:48.232381,lg:16.384550,a:160.104599,ts:1590687013.999169,mt:8},{lt:48.232199,lg:16.384765,a:161.947218,ts:1590687022.999027,mt:8},{lt:48.232022,lg:16.385021,a:162.971048,ts:1590687030.998894,mt:8},{lt:48.231896,lg:16.385317,a:163.707004,ts:1590687039.998751,mt:1},{lt:48.231677,lg:16.385427,a:161.292640,ts:1590687055.998486,mt:7},{lt:48.231475,lg:16.385577,a:160.444878,ts:1590687067.000113,mt:8},{lt:48.231304,lg:16.385830,a:160.460706,ts:1590687076.000121,mt:8},{lt:48.231101,lg:16.385981,a:161.740904,ts:1590687083.000038,mt:8},{lt:48.230927,lg:16.386213,a:160.522506,ts:1590687090.999883,mt:8},{lt:48.230782,lg:16.386489,a:160.633991,ts:1590687099.999724,mt:8},{lt:48.230679,lg:16.386790,a:161.659405,ts:1590687107.999583,mt:8},{lt:48.230493,lg:16.386999,a:161.301092,ts:1590687122.999332,mt:8},{lt:48.230308,lg:16.387212,a:161.869819,ts:1590687131.999184,mt:8},{lt:48.230117,lg:16.387416,a:161.930051,ts:1590687146.998937,mt:7},{lt:48.229931,lg:16.387639,a:160.856508,ts:1590687159.998725,mt:8},{lt:48.229748,lg:16.387855,a:160.006450,ts:1590687166.998614,mt:8},{lt:48.229558,lg:16.388040,a:159.539374,ts:1590687174.998480,mt:8},{lt:48.229782,lg:16.387857,a:10.063378,ts:190687205.000037,mt:8}];
        const b = [];
    
    
        for(var i=0;i < a.length-1;i++){ 
        var A = {
            lat: a[i].lt,
            lon: a[i].ln
          };
          
          var B = {
            lat: a[i+1].lt,
            lon: a[i+1].ln
          };
          const dist = await Distance.between(A, B);
          var timetaken = await calcu(a[i+1].ts,a[i].ts);
          var op = {
            dc:dist.human_readable().distance,
            units: dist.human_readable().unit,
            tk:timetaken,
            timeunits:"Seconds"
          };
          b.push(op);
        }
        res.send(b);
        });
        
        function calcu(a,b){
           var cal3  = a - b;
           return cal3;
        }
    


app.listen(8000, () => {
  console.log('Example app listening on port 8000!')
});